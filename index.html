<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Birthday Game V2</title>
    <link href="https://fonts.googleapis.com/css2?family=Mali:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #E0F7FA;
            --box-color: #FFF3E0;
            --accent-color: #FF8A65;
            --text-color: #5D4037;
        }

        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden; /* ‡∏•‡πá‡∏≠‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô */
        }

        body {
            background-color: var(--bg-color);
            background-image: radial-gradient(circle, #B2EBF2 10%, transparent 10%);
            background-size: 30px 30px;
            font-family: 'Mali', cursive;
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            touch-action: none; /* ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ã‡∏π‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
        }

        .container {
            background-color: var(--box-color);
            width: 90%;
            max-width: 450px; /* ‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏û‡∏≠‡∏î‡∏µ‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
            padding: 20px;
            border-radius: 20px;
            border: 5px solid var(--accent-color);
            box-shadow: 5px 5px 0px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
            z-index: 10;
        }

        h1 { font-size: 1.8rem; margin: 10px 0; color: var(--accent-color); }
        p { font-size: 1.1rem; }

        .btn-start {
            background: var(--accent-color);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.5rem;
            border-radius: 50px;
            font-family: 'Mali', cursive;
            cursor: pointer;
            box-shadow: 0 5px 0 #E64A19;
            transition: transform 0.1s;
        }
        .btn-start:active { transform: translateY(4px); box-shadow: 0 1px 0 #E64A19; }

        /* --- ‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡∏° --- */
        #game-area {
            position: relative;
            width: 100%;
            height: 350px; /* ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏° */
            background: white;
            border: 2px dashed #FFCCBC;
            border-radius: 15px;
            overflow: hidden; /* ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: ‡∏ï‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡∏≠‡∏≠‡∏Å */
            margin-top: 15px;
            touch-action: none;
        }

        .item {
            position: absolute;
            font-size: 3.5rem; /* ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô */
            top: -80px; /* ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏Å‡∏•‡πà‡∏≠‡∏á */
            cursor: pointer;
            user-select: none;
            /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏î‡πÉ‡∏´‡πâ‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏Ç‡∏∂‡πâ‡∏ô */
            width: 80px;
            height: 80px;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
        }

        .pop {
            animation: popAnim 0.3s forwards;
        }

        @keyframes popAnim {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(1.5); opacity: 0; }
        }

        /* --- ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏ö --- */
        .photo-frame {
            width: 150px; height: 150px; margin: 10px auto;
            border-radius: 50%; border: 4px solid white;
            box-shadow: 0 0 15px rgba(255,138,101,0.4);
            overflow: hidden; background: #eee;
        }
        .photo-frame img { width: 100%; height: 100%; object-fit: cover; }

    </style>
</head>
<body>

    <div id="screen-start" class="container">
        <img src="https://media.tenor.com/4z0apJUiVQYAAAAi/dudu-loves-bubu-gif.gif" height="150px" alt="">
        <h1>üéâ ‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î!</h1>
        <p>‡πÄ‡∏Å‡πá‡∏ö‡∏´‡∏±‡∏ß‡πÉ‡∏à‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö 10 ‡∏î‡∏ß‡∏á ‚ù§Ô∏è</p>
        <br>
        <button class="btn-start" onclick="initGame()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡∏¢!</button>
    </div>

    <div id="screen-game" class="container" style="display: none;">
        <h2>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: <span id="score-text" style="color:red; font-size:1.5em;">0</span> / 10</h2>
        <div id="game-area"></div>
    </div>

    <div id="screen-end" class="container" style="display: none;">
        <h1>üéÇ Happy Birthday!</h1>
       <img src="https://media.tenor.com/U7yqdWZSvEYAAAAi/dudu-butt.gif" height="150px" alt="">
        <div style="background: white; padding: 15px; border-radius: 10px; margin-top:10px;">
            <p>‡∏™‡∏∏‡∏Ç‡∏™‡∏±‡∏ô‡∏ï‡πå‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡∏ô‡∏∞ ‚ù§Ô∏è</p>
            <p>‡∏à‡∏∏‡∏°‡πâ‡∏ß‡∏ö‡πÜ‡πÜ ‚ù§Ô∏è</p>

        </div>
        <button class="btn-start" style="font-size: 1rem; padding: 10px 20px; margin-top: 15px;" onclick="location.reload()">‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà</button>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script>
        // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏Å‡∏°
        let score = 0;
        const target = 10;
        let gameLoop;
        let isGameRunning = false;
        
        // ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏´‡∏•‡πà‡∏ô‡∏•‡∏á‡∏°‡∏≤
        const icons = ['‚ù§Ô∏è', 'üéÇ', 'üéÅ', 'üß∏', 'üç≠'];

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏Å‡∏°
        function initGame() {
            document.getElementById('screen-start').style.display = 'none';
            document.getElementById('screen-game').style.display = 'block';
            score = 0;
            updateScore();
            isGameRunning = true;
            
            // ‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏Ç‡∏≠‡∏á‡∏•‡∏á‡∏°‡∏≤‡∏ó‡∏∏‡∏Å‡πÜ 0.7 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
            gameLoop = setInterval(spawnItem, 700);
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏≠‡πÄ‡∏ó‡∏°
        function spawnItem() {
            if (!isGameRunning) return;

            const area = document.getElementById('game-area');
            const item = document.createElement('div');
            item.className = 'item';
            item.innerHTML = icons[Math.floor(Math.random() * icons.length)];
            
            // ‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô (‡∏ã‡πâ‡∏≤‡∏¢-‡∏Ç‡∏ß‡∏≤)
            // ‡∏•‡∏ö 80 ‡∏Ñ‡∏∑‡∏≠‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏° ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ï‡∏Å‡∏Ç‡∏≠‡∏ö
            const maxLeft = area.offsetWidth - 80;
            const randomLeft = Math.floor(Math.random() * maxLeft);
            item.style.left = randomLeft + 'px';

            // ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏Å (Animation ‡∏î‡πâ‡∏ß‡∏¢ JS ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏±‡∏ß‡∏£‡πå‡πÉ‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠)
            let posTop = -80;
            const speed = Math.random() * 2 + 2; // ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß 2-4 pixel ‡∏ï‡πà‡∏≠‡πÄ‡∏ü‡∏£‡∏°

            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏Å
            function fall() {
                if (!isGameRunning || item.classList.contains('pop')) return;
                
                posTop += speed;
                item.style.top = posTop + 'px';

                // ‡∏ñ‡πâ‡∏≤‡∏ï‡∏Å‡πÄ‡∏•‡∏¢‡∏Ç‡∏≠‡∏ö‡∏•‡πà‡∏≤‡∏á -> ‡∏•‡∏ö‡∏ó‡∏¥‡πâ‡∏á
                if (posTop > 400) {
                    if(item.parentNode) item.remove();
                } else {
                    requestAnimationFrame(fall);
                }
            }

            // ‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™ (‡πÉ‡∏ä‡πâ onmousedown + ontouchstart ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏±‡∏ß‡∏£‡πå)
            const handleTap = (e) => {
                e.preventDefault(); // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ã‡∏π‡∏°‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å text
                if (item.classList.contains('pop')) return; // ‡∏ñ‡πâ‡∏≤‡∏Å‡∏î‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß‡∏´‡πâ‡∏≤‡∏°‡∏Å‡∏î‡∏ã‡πâ‡∏≥

                score++;
                updateScore();
                
                // ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏£‡∏∞‡πÄ‡∏ö‡∏¥‡∏î
                item.classList.add('pop');
                
                // ‡∏•‡∏ö Element ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏à‡∏ö
                setTimeout(() => {
                    if(item.parentNode) item.remove();
                }, 300);

                if (score >= target) winGame();
            };

            item.addEventListener('mousedown', handleTap);
            item.addEventListener('touchstart', handleTap, {passive: false});

            area.appendChild(item);
            requestAnimationFrame(fall);
        }

        function updateScore() {
            document.getElementById('score-text').innerText = score;
        }

        function winGame() {
            isGameRunning = false;
            clearInterval(gameLoop);
            
            // ‡∏£‡∏≠‡πÅ‡∏õ‡πä‡∏ö‡∏ô‡∏∂‡∏á‡∏Ñ‡πà‡∏≠‡∏¢‡πÇ‡∏ä‡∏ß‡πå‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏ö
            setTimeout(() => {
                document.getElementById('screen-game').style.display = 'none';
                document.getElementById('screen-end').style.display = 'block';
                fireConfetti();
            }, 500);
        }

        function fireConfetti() {
            // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡πÇ‡∏´‡∏•‡∏î library ‡∏û‡∏•‡∏∏‡∏°‡∏≤‡πÑ‡∏î‡πâ‡πÑ‡∏´‡∏° ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏Å‡πá‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏¢‡∏¥‡∏á (‡∏Å‡∏±‡∏ô‡∏à‡∏≠‡∏Ç‡∏≤‡∏ß)
            if (typeof confetti === 'function') {
                var duration = 5 * 1000;
                var end = Date.now() + duration;

                (function frame() {
                    confetti({
                        particleCount: 5,
                        angle: 60,
                        spread: 55,
                        origin: { x: 0 }
                    });
                    confetti({
                        particleCount: 5,
                        angle: 120,
                        spread: 55,
                        origin: { x: 1 }
                    });

                    if (Date.now() < end) {
                        requestAnimationFrame(frame);
                    }
                }());
            }
        }
    </script>
</body>
</html>